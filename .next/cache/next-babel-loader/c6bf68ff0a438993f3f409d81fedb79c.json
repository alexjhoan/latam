{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ansina/jsStuff/infocasas-landings/shared-components/Components/Image/web.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Measure from \"react-measure\";\nimport { Component } from \"react\";\n\nvar ImagenOptimizada = /*#__PURE__*/function (_Component) {\n  _inherits(ImagenOptimizada, _Component);\n\n  var _super = _createSuper(ImagenOptimizada);\n\n  function ImagenOptimizada() {\n    var _this;\n\n    _classCallCheck(this, ImagenOptimizada);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      dimensions: {\n        width: 1,\n        height: 1\n      },\n      errored: false\n    });\n\n    return _this;\n  }\n\n  _createClass(ImagenOptimizada, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Measure, {\n        bounds: true,\n        onResize: function onResize(contentRect) {\n          //only first time rendering\n          if (_this2.state.dimensions.width <= 1) {\n            _this2.setState({\n              dimensions: contentRect.bounds\n            });\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 7\n        }\n      }, function (_ref) {\n        var measureRef = _ref.measureRef;\n        var white_pixel = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8zwMAAhABDcCVldsAAAAASUVORK5CYII=\";\n        var width = String(Math.round(Math.max(_this2.props.minWidth ? _this2.props.minWidth : 1, _this2.state.dimensions.width)));\n        var height = String(Math.round(Math.max(_this2.props.minHeight ? _this2.props.minHeight : 1, _this2.state.dimensions.height)));\n        var d = width + \"x\" + height;\n        var resize = _this2.props.resize ? _this2.props.resize : \"outside\";\n        var src = String(_this2.props.src);\n        src = src.replace(\"cdn1.\", \"cdn2.\");\n        src = src.replace(\"repo/img/\", \"repo/img/\" + \"th.\" + resize + d + \".\");\n        src = src.replace(\"web/\", \"web/\" + \"th.\" + resize + d + \".\");\n        var imgProps = {\n          src: _this2.state.dimensions.width > 1 ? src : white_pixel,\n          alt: _this2.state.dimensions.width > 1 ? _this2.props.alt : \"\"\n        };\n\n        for (var i in _this2.props) {\n          if ([\"className\", 'width', 'height'].includes(i)) {\n            imgProps[i] = _this2.props[i];\n          }\n        }\n\n        if (_this2.state.errored) {\n          imgProps.src = \"https://tutaki.org.nz/wp-content/uploads/2019/04/no-image-1.png\";\n        }\n\n        return __jsx(\"img\", _extends({\n          ref: measureRef\n        }, imgProps, {\n          onError: function onError() {\n            return !_this2.state.errored && _this2.setState(_objectSpread(_objectSpread({}, _this2.state), {}, {\n              errored: true\n            }));\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 18\n          }\n        }));\n      });\n    }\n  }]);\n\n  return ImagenOptimizada;\n}(Component);\n\nexport { ImagenOptimizada };","map":{"version":3,"sources":["/home/ansina/jsStuff/infocasas-landings/shared-components/Components/Image/web.js"],"names":["Measure","Component","ImagenOptimizada","dimensions","width","height","errored","contentRect","state","setState","bounds","measureRef","white_pixel","String","Math","round","max","props","minWidth","minHeight","d","resize","src","replace","imgProps","alt","i","includes"],"mappings":"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","sourcesContent":["import Measure from \"react-measure\";\nimport {Component} from \"react\";\n\nclass ImagenOptimizada extends Component {\n  state = {\n    dimensions: {\n      width: 1,\n      height: 1,\n    },\n    errored: false,\n  };\n\n  render() {\n\n    return (\n      <Measure\n        bounds\n        onResize={(contentRect) => {\n          //only first time rendering\n          if (this.state.dimensions.width <= 1) {\n            this.setState({ dimensions: contentRect.bounds });\n          }\n        }}\n      >\n        {({ measureRef }) => {\n          const white_pixel =\n            \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8zwMAAhABDcCVldsAAAAASUVORK5CYII=\";\n\n          const width = String(\n            Math.round(\n              Math.max(\n                this.props.minWidth ? this.props.minWidth : 1,\n                this.state.dimensions.width\n              )\n            )\n          );\n          const height = String(\n            Math.round(\n              Math.max(\n                this.props.minHeight ? this.props.minHeight : 1,\n                this.state.dimensions.height\n              )\n            )\n          );\n\n          const d = width + \"x\" + height;\n          const resize = this.props.resize ? this.props.resize : \"outside\";\n          let src = String(this.props.src);\n          src = src.replace(\"cdn1.\", \"cdn2.\");\n          src = src.replace(\n            \"repo/img/\",\n            \"repo/img/\" + \"th.\" + resize + d + \".\"\n          );\n          src = src.replace(\"web/\", \"web/\" + \"th.\" + resize + d + \".\");\n\n          const imgProps = {\n            src: this.state.dimensions.width > 1 ? src : white_pixel,\n            alt: this.state.dimensions.width > 1 ? this.props.alt : \"\",\n          };\n\n          for (const i in this.props) {\n            if ([\"className\", 'width', 'height'].includes(i)) {\n              imgProps[i] = this.props[i];\n            }\n          }\n\n          if (this.state.errored) {\n            imgProps.src = \"https://tutaki.org.nz/wp-content/uploads/2019/04/no-image-1.png\";\n          }\n\n          return <img ref={measureRef} {...imgProps} onError={() => !this.state.errored && this.setState({...this.state, errored:true})} />;\n        }}\n      </Measure>\n    );\n  }\n}\n\nexport { ImagenOptimizada };\n"]},"metadata":{},"sourceType":"module"}