{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/ansina/jsStuff/infocasas-landings/shared-components/Components/User/OneTapSignIn/web.tsx\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from \"react\";\nimport Console from \"../../../../lib/console\";\nimport getConfig from \"next/config\";\nimport { useAuthCheck } from \"../useAuthCheck\";\nimport { useUser } from \"../User.hook\";\nimport cookie from \"js-cookie\";\nimport Head from \"next/head\";\nvar googleClientID = getConfig().publicRuntimeConfig.googleClientID;\nexport var OneTapSignIn = function OneTapSignIn() {\n  _s();\n\n  var _useAuthCheck = useAuthCheck(),\n      isLoggedIn = _useAuthCheck.isLoggedIn,\n      recheck = _useAuthCheck.recheck;\n\n  var _useUser = useUser(),\n      oneTapSignIn = _useUser.oneTapSignIn;\n\n  var handleResponse = function handleResponse(response) {\n    return oneTapSignIn.send({\n      token: response.credential\n    });\n  };\n\n  useEffect(function () {\n    if (!isLoggedIn && oneTapSignIn.response.data && !oneTapSignIn.response.loading) {\n      cookie.set(\"frontend_token\", oneTapSignIn.response.data.googleOneTapLogin.access_token);\n      localStorage.setItem(\"user_md5\", oneTapSignIn.response.data.googleOneTapLogin.user_md5);\n      localStorage.setItem(\"one_tap_logged\", \"true\");\n      recheck();\n    }\n  }, [oneTapSignIn.response]);\n  useEffect(function () {\n    // @ts-ignore\n    var google = window.google;\n\n    if (!isLoggedIn && typeof google != \"undefined\") {\n      var alreadyOneTapLogged = localStorage.getItem(\"one_tap_logged\");\n      google.accounts.id.initialize({\n        client_id: googleClientID,\n        callback: handleResponse,\n        auto_select: typeof alreadyOneTapLogged != \"undefined\" && alreadyOneTapLogged == \"true\"\n      });\n      google.accounts.id.prompt(function (n) {\n        Console.log(\"Debug OneTap - \" + n.getNotDisplayedReason());\n      });\n    }\n  }, [isLoggedIn]);\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }\n  }, __jsx(\"meta\", {\n    name: \"google-signin-client_id\",\n    content: googleClientID,\n    className: \"jsx-1827809313\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }), __jsx(\"meta\", {\n    name: \"google-signin-scope\",\n    content: \"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email\",\n    className: \"jsx-1827809313\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }), __jsx(\"meta\", {\n    name: \"google-signin-cookiepolicy\",\n    content: \"single_host_origin\",\n    className: \"jsx-1827809313\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  })), __jsx(\"div\", {\n    id: \"one-tap-container\",\n    className: \"jsx-1827809313\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }\n  }, \" \"), __jsx(_JSXStyle, {\n    id: \"1827809313\",\n    __self: _this\n  }, \"#credential_picker_container{z-index:100 !important;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Fuc2luYS9qc1N0dWZmL2luZm9jYXNhcy1sYW5kaW5ncy9zaGFyZWQtY29tcG9uZW50cy9Db21wb25lbnRzL1VzZXIvT25lVGFwU2lnbkluL3dlYi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0RzQixBQUc2Qix1QkFDeEIiLCJmaWxlIjoiL2hvbWUvYW5zaW5hL2pzU3R1ZmYvaW5mb2Nhc2FzLWxhbmRpbmdzL3NoYXJlZC1jb21wb25lbnRzL0NvbXBvbmVudHMvVXNlci9PbmVUYXBTaWduSW4vd2ViLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBDb25zb2xlIGZyb20gXCIuLi8uLi8uLi8uLi9saWIvY29uc29sZVwiO1xuaW1wb3J0IGdldENvbmZpZyBmcm9tIFwibmV4dC9jb25maWdcIjtcbmltcG9ydCB7IHVzZUF1dGhDaGVjayB9IGZyb20gXCIuLi91c2VBdXRoQ2hlY2tcIjtcbmltcG9ydCB7IHVzZVVzZXIgfSBmcm9tIFwiLi4vVXNlci5ob29rXCI7XG5pbXBvcnQgY29va2llIGZyb20gXCJqcy1jb29raWVcIjtcbmltcG9ydCBIZWFkIGZyb20gXCJuZXh0L2hlYWRcIjtcbmNvbnN0IHsgZ29vZ2xlQ2xpZW50SUQgfSA9IGdldENvbmZpZygpLnB1YmxpY1J1bnRpbWVDb25maWc7XG5cbmV4cG9ydCBjb25zdCBPbmVUYXBTaWduSW4gPSAoKSA9PiB7XG5cdGNvbnN0IHsgaXNMb2dnZWRJbiwgcmVjaGVjayB9ID0gdXNlQXV0aENoZWNrKCk7XG5cdGNvbnN0IHsgb25lVGFwU2lnbkluIH0gPSB1c2VVc2VyKCk7XG5cblx0Y29uc3QgaGFuZGxlUmVzcG9uc2UgPSByZXNwb25zZSA9PiBvbmVUYXBTaWduSW4uc2VuZCh7IHRva2VuOiByZXNwb25zZS5jcmVkZW50aWFsIH0pO1xuXG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0aWYgKCFpc0xvZ2dlZEluICYmIG9uZVRhcFNpZ25Jbi5yZXNwb25zZS5kYXRhICYmICFvbmVUYXBTaWduSW4ucmVzcG9uc2UubG9hZGluZykge1xuXHRcdFx0Y29va2llLnNldChcImZyb250ZW5kX3Rva2VuXCIsIG9uZVRhcFNpZ25Jbi5yZXNwb25zZS5kYXRhLmdvb2dsZU9uZVRhcExvZ2luLmFjY2Vzc190b2tlbik7XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJfbWQ1XCIsIG9uZVRhcFNpZ25Jbi5yZXNwb25zZS5kYXRhLmdvb2dsZU9uZVRhcExvZ2luLnVzZXJfbWQ1KTtcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwib25lX3RhcF9sb2dnZWRcIiwgXCJ0cnVlXCIpO1xuXHRcdFx0cmVjaGVjaygpO1xuXHRcdH1cblx0fSwgW29uZVRhcFNpZ25Jbi5yZXNwb25zZV0pO1xuXG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IGdvb2dsZSA9IHdpbmRvdy5nb29nbGU7XG5cdFx0aWYgKCFpc0xvZ2dlZEluICYmIHR5cGVvZiBnb29nbGUgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0Y29uc3QgYWxyZWFkeU9uZVRhcExvZ2dlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwib25lX3RhcF9sb2dnZWRcIik7XG5cblx0XHRcdGdvb2dsZS5hY2NvdW50cy5pZC5pbml0aWFsaXplKHtcblx0XHRcdFx0Y2xpZW50X2lkOiBnb29nbGVDbGllbnRJRCxcblx0XHRcdFx0Y2FsbGJhY2s6IGhhbmRsZVJlc3BvbnNlLFxuXG5cdFx0XHRcdGF1dG9fc2VsZWN0OlxuXHRcdFx0XHRcdHR5cGVvZiBhbHJlYWR5T25lVGFwTG9nZ2VkICE9IFwidW5kZWZpbmVkXCIgJiYgYWxyZWFkeU9uZVRhcExvZ2dlZCA9PSBcInRydWVcIixcblx0XHRcdH0pO1xuXHRcdFx0Z29vZ2xlLmFjY291bnRzLmlkLnByb21wdChuID0+IHtcblx0XHRcdFx0Q29uc29sZS5sb2coXCJEZWJ1ZyBPbmVUYXAgLSBcIiArIG4uZ2V0Tm90RGlzcGxheWVkUmVhc29uKCkpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LCBbaXNMb2dnZWRJbl0pO1xuXG5cdHJldHVybiAoXG5cdFx0PFJlYWN0LkZyYWdtZW50PlxuXHRcdFx0PEhlYWQ+XG5cdFx0XHRcdDxtZXRhIG5hbWU9XCJnb29nbGUtc2lnbmluLWNsaWVudF9pZFwiIGNvbnRlbnQ9e2dvb2dsZUNsaWVudElEfSAvPlxuXHRcdFx0XHQ8bWV0YVxuXHRcdFx0XHRcdG5hbWU9XCJnb29nbGUtc2lnbmluLXNjb3BlXCJcblx0XHRcdFx0XHRjb250ZW50PVwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC91c2VyaW5mby5wcm9maWxlIGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8uZW1haWxcIlxuXHRcdFx0XHQvPlxuXHRcdFx0XHQ8bWV0YSBuYW1lPVwiZ29vZ2xlLXNpZ25pbi1jb29raWVwb2xpY3lcIiBjb250ZW50PVwic2luZ2xlX2hvc3Rfb3JpZ2luXCIgLz5cblx0XHRcdDwvSGVhZD5cblx0XHRcdDxkaXYgaWQ9XCJvbmUtdGFwLWNvbnRhaW5lclwiPiA8L2Rpdj5cblx0XHRcdDxzdHlsZSBqc3ggZ2xvYmFsPntgXG5cdFx0XHRcdCNjcmVkZW50aWFsX3BpY2tlcl9jb250YWluZXIge1xuXHRcdFx0XHRcdHotaW5kZXg6IDEwMCAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cdFx0XHRgfTwvc3R5bGU+XG5cdFx0PC9SZWFjdC5GcmFnbWVudD5cblx0KTtcbn07XG4iXX0= */\\n/*@ sourceURL=/home/ansina/jsStuff/infocasas-landings/shared-components/Components/User/OneTapSignIn/web.tsx */\"));\n};\n\n_s(OneTapSignIn, \"VYX60qPtqlG7DcryBrUWyzgszN4=\", false, function () {\n  return [useAuthCheck, useUser];\n});\n\n_c = OneTapSignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"OneTapSignIn\");","map":{"version":3,"sources":["/home/ansina/jsStuff/infocasas-landings/shared-components/Components/User/OneTapSignIn/web.tsx"],"names":["React","useEffect","Console","getConfig","useAuthCheck","useUser","cookie","Head","googleClientID","publicRuntimeConfig","OneTapSignIn","isLoggedIn","recheck","oneTapSignIn","handleResponse","response","send","token","credential","data","loading","set","googleOneTapLogin","access_token","localStorage","setItem","user_md5","google","window","alreadyOneTapLogged","getItem","accounts","id","initialize","client_id","callback","auto_select","prompt","n","log","getNotDisplayedReason"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Console from \"../../../../lib/console\";\nimport getConfig from \"next/config\";\nimport { useAuthCheck } from \"../useAuthCheck\";\nimport { useUser } from \"../User.hook\";\nimport cookie from \"js-cookie\";\nimport Head from \"next/head\";\nconst { googleClientID } = getConfig().publicRuntimeConfig;\n\nexport const OneTapSignIn = () => {\n\tconst { isLoggedIn, recheck } = useAuthCheck();\n\tconst { oneTapSignIn } = useUser();\n\n\tconst handleResponse = response => oneTapSignIn.send({ token: response.credential });\n\n\tuseEffect(() => {\n\t\tif (!isLoggedIn && oneTapSignIn.response.data && !oneTapSignIn.response.loading) {\n\t\t\tcookie.set(\"frontend_token\", oneTapSignIn.response.data.googleOneTapLogin.access_token);\n\t\t\tlocalStorage.setItem(\"user_md5\", oneTapSignIn.response.data.googleOneTapLogin.user_md5);\n\t\t\tlocalStorage.setItem(\"one_tap_logged\", \"true\");\n\t\t\trecheck();\n\t\t}\n\t}, [oneTapSignIn.response]);\n\n\tuseEffect(() => {\n\t\t// @ts-ignore\n\t\tconst google = window.google;\n\t\tif (!isLoggedIn && typeof google != \"undefined\") {\n\t\t\tconst alreadyOneTapLogged = localStorage.getItem(\"one_tap_logged\");\n\n\t\t\tgoogle.accounts.id.initialize({\n\t\t\t\tclient_id: googleClientID,\n\t\t\t\tcallback: handleResponse,\n\n\t\t\t\tauto_select:\n\t\t\t\t\ttypeof alreadyOneTapLogged != \"undefined\" && alreadyOneTapLogged == \"true\",\n\t\t\t});\n\t\t\tgoogle.accounts.id.prompt(n => {\n\t\t\t\tConsole.log(\"Debug OneTap - \" + n.getNotDisplayedReason());\n\t\t\t});\n\t\t}\n\t}, [isLoggedIn]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Head>\n\t\t\t\t<meta name=\"google-signin-client_id\" content={googleClientID} />\n\t\t\t\t<meta\n\t\t\t\t\tname=\"google-signin-scope\"\n\t\t\t\t\tcontent=\"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email\"\n\t\t\t\t/>\n\t\t\t\t<meta name=\"google-signin-cookiepolicy\" content=\"single_host_origin\" />\n\t\t\t</Head>\n\t\t\t<div id=\"one-tap-container\"> </div>\n\t\t\t<style jsx global>{`\n\t\t\t\t#credential_picker_container {\n\t\t\t\t\tz-index: 100 !important;\n\t\t\t\t}\n\t\t\t`}</style>\n\t\t</React.Fragment>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}