{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useContext } from \"react\";\nimport { ConfigStateContext } from \"../../Contexts/Configurations/context\";\nimport TagManager from \"react-gtm-module\";\nimport { useAuthCheck } from \"../../Components/User/useAuthCheck\";\nimport { useUser } from \"../../Components/User/User.hook\";\nexport var useGoogleTagManager = function useGoogleTagManager() {\n  _s();\n\n  var _user$data;\n\n  var _useContext = useContext(ConfigStateContext),\n      google_tag_manager_id = _useContext.google_tag_manager_id;\n\n  var _useAuthCheck = useAuthCheck(),\n      isLoggedIn = _useAuthCheck.isLoggedIn;\n\n  var _useUser = useUser(),\n      user = _useUser.user;\n\n  var IS_BROWSER = true;\n  var userData = isLoggedIn ? {\n    email: (_user$data = user.data) === null || _user$data === void 0 ? void 0 : _user$data.email\n  } : {};\n  return {\n    Init: function Init() {\n      if (IS_BROWSER) TagManager.initialize(_objectSpread(_objectSpread({}, userData), {}, {\n        gtmId: google_tag_manager_id\n      }));\n    },\n    PageViewEvent: function PageViewEvent(_ref) {\n      var page = _ref.page;\n\n      if (IS_BROWSER) {\n        TagManager.initialize({\n          gtmId: google_tag_manager_id,\n          dataLayer: _objectSpread(_objectSpread({}, userData), {}, {\n            page: page\n          }),\n          dataLayerName: \"PageDataLayer\"\n        });\n      }\n    },\n    Event: function Event(_ref2) {\n      var name = _ref2.name,\n          data = _ref2.data;\n      TagManager.initialize({\n        gtmId: google_tag_manager_id,\n        dataLayer: _objectSpread({\n          sendUserData: userData\n        }, data),\n        dataLayerName: name || \"dataLayer\"\n      });\n    }\n  };\n};\n\n_s(useGoogleTagManager, \"UlrLnVMp0Yqky78HoR9OWMONPIE=\", false, function () {\n  return [useAuthCheck, useUser];\n});","map":{"version":3,"sources":["/home/ansina/jsStuff/infocasas-landings/shared-components/GlobalHooks/web/GoogleTagManager.hook.tsx"],"names":["useContext","ConfigStateContext","TagManager","useAuthCheck","useUser","useGoogleTagManager","google_tag_manager_id","isLoggedIn","user","IS_BROWSER","userData","email","data","Init","initialize","gtmId","PageViewEvent","page","dataLayer","dataLayerName","Event","name","sendUserData"],"mappings":";;;;;;;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,kBAAT,QAAmC,uCAAnC;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,YAAT,QAA6B,oCAA7B;AACA,SAASC,OAAT,QAAwB,iCAAxB;AAEA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAAA;;AAAA;;AAAA,oBACNL,UAAU,CAACC,kBAAD,CADJ;AAAA,MAChCK,qBADgC,eAChCA,qBADgC;;AAAA,sBAEjBH,YAAY,EAFK;AAAA,MAEhCI,UAFgC,iBAEhCA,UAFgC;;AAAA,iBAGvBH,OAAO,EAHgB;AAAA,MAGhCI,IAHgC,YAGhCA,IAHgC;;AAIxC,MAAMC,UAAU,OAAhB;AACA,MAAMC,QAAQ,GAAGH,UAAU,GAAG;AAAEI,IAAAA,KAAK,gBAAEH,IAAI,CAACI,IAAP,+CAAE,WAAWD;AAApB,GAAH,GAAiC,EAA5D;AAEA,SAAO;AACNE,IAAAA,IAAI,EAAE,gBAAM;AACX,UAAIJ,UAAJ,EAAgBP,UAAU,CAACY,UAAX,iCAA2BJ,QAA3B;AAAqCK,QAAAA,KAAK,EAAET;AAA5C;AAChB,KAHK;AAKNU,IAAAA,aAAa,EAAE,6BAAgC;AAAA,UAA7BC,IAA6B,QAA7BA,IAA6B;;AAC9C,UAAIR,UAAJ,EAAgB;AACfP,QAAAA,UAAU,CAACY,UAAX,CAAsB;AACrBC,UAAAA,KAAK,EAAET,qBADc;AAErBY,UAAAA,SAAS,kCACLR,QADK;AAERO,YAAAA,IAAI,EAAEA;AAFE,YAFY;AAMrBE,UAAAA,aAAa,EAAE;AANM,SAAtB;AAQA;AACD,KAhBK;AAkBNC,IAAAA,KAAK,EAAE,sBAAsD;AAAA,UAAnDC,IAAmD,SAAnDA,IAAmD;AAAA,UAA7CT,IAA6C,SAA7CA,IAA6C;AAC5DV,MAAAA,UAAU,CAACY,UAAX,CAAsB;AACrBC,QAAAA,KAAK,EAAET,qBADc;AAErBY,QAAAA,SAAS;AACRI,UAAAA,YAAY,EAAEZ;AADN,WAELE,IAFK,CAFY;AAMrBO,QAAAA,aAAa,EAAEE,IAAI,IAAI;AANF,OAAtB;AAQA;AA3BK,GAAP;AA6BA,CApCM;;GAAMhB,mB;UAEWF,Y,EACNC,O","sourcesContent":["import { useContext } from \"react\";\nimport { ConfigStateContext } from \"../../Contexts/Configurations/context\";\nimport TagManager from \"react-gtm-module\";\nimport { useAuthCheck } from \"../../Components/User/useAuthCheck\";\nimport { useUser } from \"../../Components/User/User.hook\";\n\nexport const useGoogleTagManager = () => {\n\tconst { google_tag_manager_id } = useContext(ConfigStateContext);\n\tconst { isLoggedIn } = useAuthCheck();\n\tconst { user } = useUser();\n\tconst IS_BROWSER = typeof window !== \"undefined\";\n\tconst userData = isLoggedIn ? { email: user.data?.email } : {};\n\n\treturn {\n\t\tInit: () => {\n\t\t\tif (IS_BROWSER) TagManager.initialize({ ...userData, gtmId: google_tag_manager_id });\n\t\t},\n\n\t\tPageViewEvent: ({ page }: { page: string }) => {\n\t\t\tif (IS_BROWSER) {\n\t\t\t\tTagManager.initialize({\n\t\t\t\t\tgtmId: google_tag_manager_id,\n\t\t\t\t\tdataLayer: {\n\t\t\t\t\t\t...userData,\n\t\t\t\t\t\tpage: page,\n\t\t\t\t\t},\n\t\t\t\t\tdataLayerName: \"PageDataLayer\",\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tEvent: ({ name, data }: { name?: string; data?: object }) => {\n\t\t\tTagManager.initialize({\n\t\t\t\tgtmId: google_tag_manager_id,\n\t\t\t\tdataLayer: {\n\t\t\t\t\tsendUserData: userData,\n\t\t\t\t\t...data,\n\t\t\t\t},\n\t\t\t\tdataLayerName: name || \"dataLayer\",\n\t\t\t});\n\t\t},\n\t};\n};\n"]},"metadata":{},"sourceType":"module"}